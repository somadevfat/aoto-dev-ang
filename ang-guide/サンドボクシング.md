# ターミナル・サンドボクシング

**サンドボクシング**は、エージェントが実行するターミナルコマンドをカーネルレベルで隔離し、システムを保護するためのセキュリティ機能です。

---

## 🔒 サンドボクシングの仕組み

有効にすると、エージェントが実行するコマンドは**制限された環境**（サンドボックス）内に閉じ込められます。これにより、意図しない設定変更やプロジェクト外のファイルへのアクセスを防ぐことができます。

- **ファイルシステム制限**: 指定されたワークスペース内、およびシステム実行に必要な最小限の領域への書き込みのみを許可します。
- **ネットワーク制限**: コマンドによる外部通信を個別に制御できます。

> [!IMPORTANT]
> 現在、サンドボクシングは **macOS** でのみ利用可能です（Apple の `sandbox-exec` メカニズムを使用）。Linux のサポートは近日開始予定です。

---

## ⚙️ 設定方法

Antigravity の **ユーザー設定** から、以下のトグルで制御できます。

- **Enable Terminal Sandboxing**: 全体的なサンドボックス機能のオン/オフ。
- **Sandbox Allow Network**: サンドボックス内でのネットワークアクセスの許可設定。

---

## ⚠️ 制限事項と違反時の対応

### 主な制限

- ワークスペース外の破壊的な操作（ファイルの削除・変更）の禁止。
- 許可されていないネットワーク通信の遮断。

### 違反が発生した場合

制限によりコマンドが失敗した場合は、以下の手順で解決できます。

1. **一時的なバイパス**: `Request Review` モード（レビュー要求時）に表示される「**Bypass Sandbox**」オプションを選択して実行します。
2. **恒久的な無効化**: 頻繁に制限に抵触する場合は、ユーザー設定からサンドボクシングをオフにしてください。

---

## 🛡️ ストリクトモードとの連携

**ストリクトモード**を有効にすると、安全性を最優先するため、サンドボクシングが自動的にオンになり、ネットワークアクセスはデフォルトで拒否されます。

> 詳細は [ストリクトモード](ストリクトモード.md) ガイドを参照してください。
