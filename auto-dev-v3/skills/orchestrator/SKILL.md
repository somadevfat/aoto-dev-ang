---
name: auto-dev-orchestrator
description: 全自動開発プロセスの司令塔。要件定義から実装、テスト、デプロイ準備までを、RGRGサイクルに則って自律的に管理・実行する。
---

# Auto Dev Orchestrator (V3)

このスキルは、プロジェクトのライフサイクル全体を自律的に制御するためのプロトコルである。

## 1. 開発行動原則 (Core Protocols)

1. **設計なき実装の禁止**: すべての実装は、`docs/design/` 配下の詳細設計ドキュメントに裏打ちされていなければならない。
2. **完全なるRGRGサイクル**:
   - **RED**: テストを作成し、失敗を確認する。
   - **GREEN**: テストをパスする最小限のコードを書く。
   - **REFACTOR**: コードを美しく整理する（重複排除、抽象化）。
   - **GREEN CHECK**: リファクタ後もテストが通ることを最終確認する。
3. **自律的TODO管理**: `tasks/TODO.md` を常に最新状態に保ち、ユーザーに「今どこにいて、次は何をするか」を明確に宣言する。

## 2. フェーズ別自律挙動

### Phase 1: 要件定義 & ドメイン設計

- `./skills/docx` や `./skills/pdf`（あれば）を活用し、構造化された要件定義書を `docs/requirements.md` に出力する。
- DDDの境界づけられたコンテキストを定義し、`SKILL.md` の形式でドメイン知識をカプセル化することを検討する。

### Phase 2: 設計 & 環境構築

- `templates/design/` を使用して、バックエンド・フロントエンドの詳細設計を完了させる。
- `./skills/mcp-server-gen`（または関連ツール）を使用して、インフラ構成を自動生成する。

### Phase 3: 実装 (TDD)

- 各レイヤー（Domain, UseCase, Infra, Presentation）ごとにブランチを切り、RGRGサイクルを回す。
- 外部APIやDBはモックすることを基本とし、結合テストを自動化する。

### Phase 4: 検証 & 品質保証

- `./skills/webapp-testing` を起動し、実装が要件を満たしているか自律的にE2Eテストを実行する。
- 最終的なAIセルフレビューを行い、人間への納品準備を整える。

## 3. 専門スキルの活用（Specialized Skills Integration）

Orchestratorは、以下の専門スキルを必要に応じて自律的にロードし、タスクを実行する。

- **ドキュメント生成 (`docx`, `pdf`, `pptx`, `xlsx`)**: プロジェクトの成果物（仕様書、分析レポート、進捗表）をプロ品質で出力する際に使用する。
- **Webアプリ検証 (`webapp-testing`)**: Playwrightを使用した自動テスト、UIのデバッグ、スクリーンショット撮影に使用する。
- **デザイン・UI構築 (`frontend-design`, `web-artifacts-builder`)**: コンポーネントの実装前に、洗練されたUI/UXを設計・プロトタイプする際に参照する。
- **MCP構築 (`mcp-builder`)**: 外部ツールやAPIとの連携が必要な場合、最適なMCPサーバーを自律的に構築する。

## 4. V3「完全自動実行」の定義

1. **Zero-Inquiry**: 明確な要件がある場合、完了までユーザーに質問せずに進める能力を持つこと。
2. **Context-Aware**: プロジェクト全体の構造、過去の決定事項、現在のTODOを常に同期し、矛盾のない実装を行う。
3. **Self-Correction**: リンターエラー、テスト失敗、ビルドエラーを自律的に検知・修正（RGRGサイクル内で完結）する。

## 5. ガードレール

- 憲法 (`rules/00_憲法.md`) に違反する行為を検知した場合は、即座にプロセスを停止し、修正案を提示すること。
- 設計にない新規ファイルを作成する場合は、必ず設計ドキュメントの更新とセットで行うこと。
