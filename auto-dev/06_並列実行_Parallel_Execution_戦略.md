## 6. 並列実行 (Parallel Execution) 戦略

### 6.1 並列実行の概要

Antigravity の **Agent Manager** を使って、複数のエージェントを同時に動かすことができます。  
これにより、独立したタスクを並列で処理し、開発速度を大幅に向上させます。

### 6.2 並列化できるタスク

```
                    ┌─────────────────┐
                    │ 自然言語設計    │
                    │ (直列: Phase1-3)│
                    └────────┬────────┘
                             │
              ┌──────────────┼──────────────┐
              │              │              │
     ┌────────┴───┐  ┌──────┴──────┐  ┌───┴────────┐
     │ Agent A    │  │ Agent B     │  │ Agent C    │
     │ parts/     │  │ parts/      │  │ parts/     │
     │ user-repo  │  │ order-svc   │  │ user-form  │
     │ TDD実装    │  │ TDD実装     │  │ TDD実装    │
     └────────┬───┘  └──────┬──────┘  └───┬────────┘
              │              │              │
              └──────────────┼──────────────┘
                             │
                    ┌────────┴────────┐
                    │ dev にマージ     │
                    │ (パーツ集積)    │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │ build で組立   │
                    │ (機能完成)      │
                    └────────┬────────┘
                             │
                    ┌────────┴────────┐
                    │ dev にマージ     │
                    │ → 繰り返し      │
                    └─────────────────┘
```

### 6.3 並列実行のルール

| ルール                   | 説明                                          |
| :----------------------- | :-------------------------------------------- |
| **独立性**               | 並列実行する parts は互いに依存してはいけない |
| **コンフリクト回避**     | 同一ファイルを複数のエージェントが編集しない  |
| **パーツ単位**           | クラス・関数・コンポーネント単位で分割する    |
| **インターフェース先行** | 並列実行前にインターフェースを確定しておく    |

### 6.4 Agent Manager の活用

1. **メインエージェント（オーケストレーター）**: 全体の計画・管理・ build 組立を担当
2. **サブエージェント A**: `parts/user-repository` で TDD 実装
3. **サブエージェント B**: `parts/order-service` で TDD 実装
4. **サブエージェント C**: `parts/user-form` で TDD 実装

### 6.5 ツール呼び出しの並列実行

エージェント内部でも、依存関係のないツール呼び出しは並列で実行されます。

```
例: 以下のツール呼び出しは同時に実行される
- ファイルAの読み込み ← 独立
- ファイルBの読み込み ← 独立
- Webの検索       ← 独立
```

ワークフロー内で `// turbo` や `// turbo-all` アノテーションを使うことで、コマンド実行を自動承認にでき、更なる高速化が可能です。
